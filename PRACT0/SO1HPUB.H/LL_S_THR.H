/*
  Copyright (c) 2017, Pedro Pablo Lopez Rodriguez & Julio Lozano Del Pozo
  2-clause BSD license.
*/

/* ----------------------------------------------------------------------- */
/*                               ll_s_thr.h                                */
/* ----------------------------------------------------------------------- */
/* Subconjunto de rutinas de interfaz de las llamadas al sistema           */
/* correspondiente a los threads, que son las primeras que se implementan  */
/* en SO1H.                                                                */ 
/* ----------------------------------------------------------------------- */

#ifndef LL_S_THR_H
#define LL_S_THR_H

#include "..\so1hpub.h\tipos.h"                                 /* dword_t */
#include "..\so1hpub.h\def_proc.h"                                /* tid_t */

/* ----------------------------------------------------------------------- */
/* -                                                                     - */
/* -     Llamadas al sistema implementada mediante traps (int 0x60)      - */
/* -     ==========================================================      - */
/* ----------------------------------------------------------------------- */

/* Numero de vector de interrupcion utilizado por el sistema SO1.          */

#define nVIntSO1H    0x60


int thread_create ( tid_t * tid, 
                    word_t SP0, 
					void * ( * funcionInicial ), 
					void * arg ) ;

/* ----------------------------------------------------------------------- */
/*                                                                         */
/* ----------------------------------------------------------------------- */


int thread_join ( tid_t tid, void * * res ) ;

/* ----------------------------------------------------------------------- */
/*                                                                         */
/* ----------------------------------------------------------------------- */


void thread_exit ( void * res ) ;

/* ----------------------------------------------------------------------- */
/*                                                                         */
/* ----------------------------------------------------------------------- */


int thread_yield ( void ) ;

/* ----------------------------------------------------------------------- */
/*                                                                         */
/* ----------------------------------------------------------------------- */


tid_t thread_self ( void ) ;

/* ----------------------------------------------------------------------- */
/*                                                                         */
/* ----------------------------------------------------------------------- */


#endif /* LL_S_THR_H */
